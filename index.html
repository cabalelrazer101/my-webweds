<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reychel & Lando - Our Wedding</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #fff url('https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567030/wedding_loading_bg.jpg') center center no-repeat;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      flex-direction: column;
      font-family: 'Montserrat', sans-serif;
      color: #fff;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
    }
    .loading-overlay p {
      font-size: 2rem;
      margin-top: 20px;
    }

    /* Hero Video */
    .hero-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    .hero {
      position: relative;
      overflow: hidden;
    }

    /* Enable Audio Overlay */
    .audio-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      flex-direction: column;
      font-family: 'Montserrat', sans-serif;
      color: #fff;
      text-align: center;
    }
    .audio-overlay button {
      padding: 10px 25px;
      font-size: 1.2rem;
      border: none;
      border-radius: 5px;
      background: #f5c518;
      color: #333;
      cursor: pointer;
      margin-top: 15px;
      font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567031/rings_icon.png" alt="Rings" width="100">
    <p>Loading our special day...</p>
  </div>

  <!-- Sticky Navbar -->
  <header class="navbar">
    <div class="logo">üíç Reychel & Lando</div>
    <nav>
      <a href="#hero">Home</a>
      <a href="#story">Our Story</a>
      <a href="#details">Details</a>
      <a href="#rsvp">RSVP</a>
    </nav>
  </header>
  
  <!-- Hero with video -->
  <section id="hero" class="hero">
    <video id="hero-video" loop muted playsinline preload="auto" class="hero-video">
      <source src="https://res.cloudinary.com/dcytvgwj7/video/upload/v1758567098/main_visual_15s_c7fqxd.mp4" type="video/mp4">
    </video>
    <div class="hero-content wedding-intro">
      <h1>
        Reychel <br>&<br> Lando
      </h1>
      <p class="date">December 6, 2025</p>

      <!-- Countdown Timer -->
      <div id="countdown" class="countdown"></div>

      <a href="#details" class="save-date-btn">üíå Save the Date</a>
    </div>
  </section>

  <!-- Our Story with Filmstrip Carousel -->
  <section id="story" class="story">
    <h2>Our Story</h2>
    <div class="carousel-container">
      <button class="prev" aria-label="Previous slide">‚ùÆ</button>
      <div class="carousel-viewport">
        <div class="carousel-track">
          <div class="carousel-slide" data-caption="Our First Date üíï"><img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567028/story1_dhugja.jpg" alt="1"></div>
          <div class="carousel-slide" data-caption="Beach Day üåä"><img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567027/story2_fkscxw.jpg" alt="2"></div>
          <div class="carousel-slide" data-caption="Hiking Adventure ‚õ∞Ô∏è"><img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567027/story3_wgbygb.jpg" alt="3"></div>
          <!-- Add remaining slides here with data-caption -->
        </div>
      </div>
      <button class="next" aria-label="Next slide">‚ùØ</button>
    </div>
    <div class="carousel-caption" id="carousel-caption">Our First Date üíï</div>
  </section>

  <!-- Wedding Details -->
  <section id="details" class="details">
    <h2>Wedding Details</h2>
    <div class="details-grid">
      <div class="detail-card">
        <img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567025/detail1_huwha5.jpg" alt="Ceremony" onclick="openLightbox(this)">
        <p>üìç Ceremony<br>Diocesan Shrine and Parish of Our Lady of the Pillar, Imus Cavite</p>
      </div>
      <div class="detail-card">
        <img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567025/detail2_ht7m1k.jpg" alt="Reception" onclick="openLightbox(this)">
        <p>üéâ Reception<br>Patioa Lazaro</p>
      </div>
      <div class="detail-card">
        <img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567025/detail3_tsh6og.jpg" alt="Time" onclick="openLightbox(this)">
        <p>üïì 4:00 PM<br>December 6, 2025</p>
      </div>
      <div class="detail-card">
        <img src="https://res.cloudinary.com/dcytvgwj7/image/upload/v1758567026/detail4_k2kz2e.jpg" alt="Dress Code" onclick="openLightbox(this)">
        <p>üëó Dress Code<br>Formal Attire</p>
      </div>
    </div>
  </section>

  <!-- Lightbox Modal -->
  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <span class="close">&times;</span>
    <img class="lightbox-content" id="lightbox-img">
  </div>

  <!-- RSVP Placeholder -->
  <section id="rsvp" class="rsvp">
    <h2>RSVP</h2>
    <p>RSVP form coming soon!</p>
  </section>

  <!-- Footer -->
  <footer id="footer">
    <p>¬© 2025 Reychel & Lando. All rights reserved.</p>
  </footer>

  <!-- Audio Player -->
  <div class="player-bar-wrap">
    <p class="btn-player-menu">üéµ</p>
    <div class="player-bar-status">
      <div class="player-bar-status-column"></div>
      <div class="player-bar-status-column"></div>
      <div class="player-bar-status-column"></div>
    </div>
    <p class="music-name">Joyful</p>
    <audio src="https://res.cloudinary.com/dcytvgwj7/video/upload/v1758567096/runaway_qlqag7.webm" id="page-bgm-pc" loop></audio>
    <div class="player-btn-list">
      <span class="btn-player-prev">‚èÆÔ∏è</span>
      <span class="btn-player-status play">‚ñ∂Ô∏è</span>
      <span class="btn-player-next">‚è≠Ô∏è</span>
    </div>
  </div>

  <!-- Overlay asking user to enable audio -->
  <div id="audio-overlay" class="audio-overlay">
    <div class="overlay-content">
      <p>Click to enable sound üé∂</p>
      <button id="enable-audio-btn">Enable Audio</button>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    const video = document.getElementById("hero-video");
    const audio = document.getElementById("page-bgm-pc");
    const overlay = document.getElementById("audio-overlay");
    const enableBtn = document.getElementById("enable-audio-btn");
    const playBtn = document.querySelector(".btn-player-status");
    const loadingOverlay = document.getElementById("loading-overlay");

    // Countdown Timer
    const weddingDate = new Date("December 6, 2025 16:00:00").getTime();
    const countdownEl = document.getElementById("countdown");

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = weddingDate - now;

      if (distance < 0) {
        countdownEl.innerHTML = "<p>We are married! üéâüíç</p>";
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      countdownEl.innerHTML = `
        <div class="time-box"><span>${days}</span><small>Days</small></div>
        <div class="time-box"><span>${hours}</span><small>Hours</small></div>
        <div class="time-box"><span>${minutes}</span><small>Minutes</small></div>
        <div class="time-box"><span>${seconds}</span><small>Seconds</small></div>
      `;
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();

    // Wait for video to load
    video.addEventListener('canplaythrough', () => {
      loadingOverlay.style.display = 'none';
      video.play().catch(()=>{}); // play muted for background
    });
    video.load();

    // Enable Audio & Unmute Video
    enableBtn.addEventListener("click", () => {
      video.muted = false;
      Promise.all([video.play(), audio.play()])
        .then(() => {
          overlay.style.display = "none";
          if (playBtn) playBtn.textContent = "‚è∏Ô∏è";
        })
        .catch(err => console.log("Playback failed:", err));
    });

    if (playBtn) {
      playBtn.addEventListener("click", () => {
        if (audio.paused) {
          audio.play();
          playBtn.textContent = "‚è∏Ô∏è";
        } else {
          audio.pause();
          playBtn.textContent = "‚ñ∂Ô∏è";
        }
      });
    }

    // Lightbox functions
    function openLightbox(imgElement) {
      document.getElementById("lightbox").style.display = "block";
      document.getElementById("lightbox-img").src = imgElement.src;
    }
    function closeLightbox() {
      document.getElementById("lightbox").style.display = "none";
    }

    // Filmstrip Carousel
    (function() {
      const container = document.querySelector('.carousel-container');
      const viewport = document.querySelector('.carousel-viewport');
      const track = document.querySelector('.carousel-track');
      const slides = Array.from(document.querySelectorAll('.carousel-slide'));
      const prevBtn = document.querySelector('.prev');
      const nextBtn = document.querySelector('.next');
      const captionEl = document.getElementById('carousel-caption');

      if (!container || slides.length === 0) return;

      let gap = parseFloat(getComputedStyle(track).gap) || 20;
      let currentIndex = 0;
      let autoplayTimer = null;
      const AUTOPLAY_MS = 5000;

      function updateCarousel() {
        slides.forEach((s, i) => {
          s.classList.toggle('active', i === currentIndex);
          s.style.opacity = (i === currentIndex) ? '1' : '0.5';
          s.style.transform = (i === currentIndex) ? 'scale(1)' : 'scale(0.85)';
          s.style.zIndex = (i === currentIndex) ? 2 : 1;
        });

        let sum = 0;
        for (let i = 0; i < currentIndex; i++) {
          sum += slides[i].offsetWidth + gap;
        }

        const containerWidth = viewport.clientWidth;
        const currentWidth = slides[currentIndex].offsetWidth;
        const offset = (containerWidth / 2) - (currentWidth / 2) - sum;
        track.style.transform = `translateX(${offset}px)`;

        const dataCap = slides[currentIndex].dataset.caption;
        if (captionEl) captionEl.textContent = dataCap || '';
      }

      function moveSlide(direction) {
        currentIndex = (currentIndex + direction + slides.length) % slides.length;
        updateCarousel();
      }

      prevBtn.addEventListener('click', () => { moveSlide(-1); resetAutoplay(); });
      nextBtn.addEventListener('click', () => { moveSlide(1); resetAutoplay(); });

      function startAutoplay() {
        if (autoplayTimer) clearInterval(autoplayTimer);
        autoplayTimer = setInterval(() => moveSlide(1), AUTOPLAY_MS);
      }
      function resetAutoplay() { startAutoplay(); }

      window.addEventListener('resize', () => {
        gap = parseFloat(getComputedStyle(track).gap) || gap;
        updateCarousel();
      });

      const imgs = track.querySelectorAll('img');
      let loaded = 0;
      imgs.forEach(img => {
        if (img.complete) loaded++;
        else img.addEventListener('load', () => {
          loaded++;
          if (loaded === imgs.length) {
            updateCarousel();
            startAutoplay();
          }
        });
      });
      if (loaded === imgs.length) {
        updateCarousel();
        startAutoplay();
      }
    })();
  </script>
</body>
</html>
